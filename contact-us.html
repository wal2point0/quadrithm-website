<!doctype html>
<html lang="en" class="h-100" data-bs-theme="auto">
  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <title>Send Mission Brief</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    

    <!-- Favicons -->
    <link rel="icon" type="image/png" href="favicon/curious-favicon-32x32.png" sizes="32x32" />



    <!-- Custom styles for this template -->
    <link href="index-test.css" rel="stylesheet">
  </head>

  <body class="d-flex h-100 text-center" id="mission-brief">

     <!-- LOGO -->
      <div class="d-flex w-100 h-100 p-3 mx-auto flex-column">

          <header class="mb-auto contact-header">
              <div>
                <a class="navbar-brand" href="index.html">
                  <img src="logos/curious-primary-logo.png" class="logos" alt="Quadrithm's Curious Logo">
                </a>
              </div>

              <!-- <div class="page-title mt-4">
                <h1>SEND <em>MISSION</em> BRIEF</h1> 
              </div> -->
          </header>

          <!-- QASSANDRA AUDIO -->
              <!-- <audio id="myAudio" autoplay muted></audio> you may need to change this when the website is live on the server-->
              <audio id="myAudio">
                <source src="./audio/qassandra_intro.mp3" type="audio/mpeg">
                Your browser does not support the audio element.
              </audio>
          
              <audio id="aboutQuadrithmAudio">
                <source src="./audio/find_out_more.mp3" type="audio/mpeg">
                Your browser does not support the audio element.
              </audio>
          
              <audio id="specialisationAudio">
                <source src="./audio/specialisations.mp3" type="audio/mpeg">
                Your browser does not support the audio element.
              </audio>
          
              <audio id="classifiedAudio">
                <source src="./audio/classified.mp3" type="audio/mpeg">
                Your browser does not support the audio element.
              </audio>
          
              <audio id="assignMissionAudio">
                <source src="./audio/signpost.mp3" type="audio/mpeg">
                Your browser does not support the audio element.
              </audio>

        <!-- Recording Controls -->
      <div class="container my-auto">
        <div class="row">
        <div class="bg-dark col-md-6 recorder rounded border border-success mx-auto p-5">
          <h2 class="font-bold text-center mb-4 text-gray-800">Send Mission Brief</h2>
          <div class="">

            <div class="flex justify-center">
                <button
                  id="startRecord"
                  class="btn btn-primary text-white font-bold py-2 px-4 rounded-circle flex items-center"
                >
                  <i class="bi bi-mic fs-2 mr-2"></i> rec
                </button>
            </div>

              <!-- <p id="timestamp" class="text-center text-sm text-gray-600"></p> -->
              <p id="recordingTime" class="text-center text-xl font-semibold text-gray-800"></p>

              <div class="mt-6 flex justify-center">
                <!-- <h5 class="text-lg font-semibold mb-2 text-gray-700">Recorded Audio Preview</h5> -->
                <audio id="audioPlayback" controls class="mw-100"></audio>
              </div>

            <div class="flex justify-center">
               <button
                  id="stopRecord"
                  class="btn btn-danger text-white font-bold py-2 px-4 rounded-full flex items-center"
                  disabled
                >
                  <i class="fas fa-stop-circle mr-2"></i> Stop Recording
                </button>
            </div>

            <!-- Submission Form -->
           <form id="recordingForm" class="space-y-4" novalidate>
              <div class="row flex justify-content-center">
                  <div class="col-md-6">
                    <label for="nameInput" class="block form-label text-sm font-medium text-gray-700 mb-1">Enter your name</label>
                    <input 
                      type="text" 
                      id="nameInput" 
                      name="name"
                      pattern="[A-Za-z\s]+" 
                      title="Please enter letters only" 
                      class="form-control"
                      required
                    >
                    <div class="text-red-500 text-xs mt-1 hidden" id="nameError">Please enter a valid name (letters only)</div>
                  </div>

                  <div class="col-md-6">
                    <label for="emailInput" class="block form-label text-sm font-medium text-gray-700 mb-1">
                      Enter your email
                    </label>
                    <input 
                      type="email" 
                      id="emailInput" 
                      name="email"
                      class="form-control"
                      required
                      oninput="validateEmail(this)"
                    >
                    <div class="text-red-500 text-xs mt-1 hidden" id="emailError">
                      Please enter a valid email address
                    </div>
                  </div>  
               </div>   
            </form>
            
          </div>
        </div>
      </div>
      

         <div class="mt-4">
              <button
                type="submit"
                id="submitRecording"
                class="btn btn-success hidden text-white font-bold py-2 px-4 rounded-full flex items-center justify-center"
              >
                <i class="fas fa-paper-plane mr-2"></i> Assign Mission
              </button>
          </div>
      </div>

        <!-- MENU -->
        <div id="menuBlur">
          <div class="row menu">
            <!-- Button 1  -->
              <div class="col-md-2 button-wrapper">
                <div class="collapse multi-collapse" id="multiCollapseExample1">
                    <a href="aboutus.html" class="btn btn-outline-danger p-3 px-md-2 px-lg-3 mb-3 mb-md-0 me-md-2" aria-expanded="false" id="buttonOne">What is Quadrithm?</a>
                </div>
              </div>
              
              <!-- Button 2  -->
              <div class="col-md-3 button-wrapper">
                <div class="collapse multi-collapse" id="multiCollapseExample2">
                    <a href="specialisations.html" class="btn btn-outline-danger p-3 px-md-2 px-lg-3 mb-3 mb-md-0" aria-expanded="false" id="buttonTwo">Quadrithm's Specialties</a>
                </div>
              </div>
        
              <div class="col-md-2 myrow button-wrapper">
                  <span class="dot dot-curious dot-1"></span>
                  <span class="dot dot-curious dot-2"></span>
                  <span class="dot dot-curious dot-3"></span>
                  <span class="dot dot-curious dot-4"></span>
                  <span class="dot dot-curious dot-5"></span>
                  <span class="dot dot-curious dot-6"></span>
                  <span class="dot dot-curious dot-7"></span>
                  <button class="btn button-contact uppercase" type="button" data-bs-toggle="collapse" data-bs-target=".multi-collapse" aria-expanded="false" aria-controls="multiCollapseExample1 multiCollapseExample2 multiCollapseExample3 multiCollapseExample4">
                      <span class="spark"></span>  
                        <span class="backdrop"></span>
                          <div class="text-contact">
                            Menu
                          </div>
                  </button>
              </div>
            
            <!-- Button 3  -->
            <div class="col-md-3 button-wrapper">
                <div class="collapse multi-collapse" id="multiCollapseExample3">
                    <a href="missions-completed.html" class="btn btn-outline-danger p-3 px-lg-3 mb-3 mt-3 mb-md-0 mt-md-0" aria-expanded="false" id="buttonThree">Quadrithm's Missions</a>
                </div>
            </div>
        
            <!-- Button 4  -->
            <div class="col-md-2 button-wrapper">
                <div class="collapse multi-collapse" id="multiCollapseExample4">
                    <a href="contact-us.html" class="btn btn-outline-danger p-3 px-md-2 px-lg-3 highlighted-curious" aria-expanded="false" id="buttonFour">Let's Collaborate</a>
                </div>
            </div>
        
          </div>
        </div>
        
      </div>
      
      <script src="qassandra.js"></script>
      <script src="audio-recorder.js" defer></script>
      <script>
        function validateEmail(input) {
        const email = input.value.trim();
        const emailError = document.getElementById('emailError');
        
        // This pattern requires at least one period after @
        const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;
        
        // Check if email has at least one period after @
        const hasValidDomain = email.split('@')[1]?.includes('.');
        
        if (!emailPattern.test(email) || !hasValidDomain) {
          input.setCustomValidity('Please enter a valid email address (e.g., user@example.com)');
          emailError.classList.remove('hidden');
        } else {
          input.setCustomValidity('');
          emailError.classList.add('hidden');
        }
      }

      // Also validate on form submission
      document.addEventListener('DOMContentLoaded', () => {
        const form = document.querySelector('form');
        if (form) {
          form.addEventListener('submit', (e) => {
            const emailInput = document.getElementById('emailInput');
            if (emailInput) {
              validateEmail(emailInput);
              if (!emailInput.validity.valid) {
                e.preventDefault();
              }
            }
          });
        }
      });
    </script>
   </body>
</html>
